<!DOCTYPE html>
<html>
<head>
	<title>Manifest - Sourcemap Dataset</title>
	<meta name="description" content="A simple viewer for supply chain data.">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="../../lib/css/manifest.css" /> 
	<link rel="stylesheet" href="../../lib/css/fa.css" /> 

	<link rel="icon" href="../../lib/images/favicons/icon.png">	
	<link rel="apple-touch-icon" href="../../lib/images/favicons/apple-touch-icon.png">
</head>

<body class="textpage">
	<div id="infowrap">
		<div id="textbar-wrap">
			<div id="textbar">			
				<i id="minfo-hamburger" class="fas fa-bars"></i> 
				<span id="minfo"><span id="logotype">MANIFEST</span>: Supply Chain Platform</span>
				<div id="minfodetail" class="closed">
					<p>A toolkit for visualizing, analyzing, and documenting supply chains, production lines, and trade networks.</p>
					<nav id="minfomenu">
						<a href="./info/about/" class="hb-menu-item"><i class="fas fa-archive"></i>About</a>
						<a href="./info/data/" class="hb-menu-item"><i class="fas fa-table"></i>Datasets</a>
						<a href="./info/curriculum/" class="hb-menu-item"><i class="fas fa-archive"></i>Curriculum</a>
						<div class="spacer"></div>
						<a href="https://supplystudies.com/manifestinfo/" class="hb-menu-item"><i class="fas fa-cog"></i>Supply Studies</a>
						<a href="https://github.com/hock/Manifest" class="hb-menu-item"><i class="fab fa-github-square"></i>Github</a>
					</nav>
					<p>You can start with data from our <a href="./info/data/">repositories</a>, or load a URL in one of the <a href="">file formats</a> we support.</p>
					<div id="loadlistpanel">
						<select name="load-samples" id="load-samples"></select>
						<button id="load-samples-btn">Load</button>
					</div>
					
				</div>
				<nav role="navigation" class="text-menu dropdown">
				  <ul>
				    <li><a href="../about/">About</a></li> 
				    <li><a href="https://supplystudies.com/syllabus/">Curriculum</a></li> 
				    <li><a href="../data/">Datasets</a>
						<ul class="dropdown">
					        <li><a href="../data/">Sourcemap Data</a></li>
					      </ul>
					  </li>
				    <li><a href="https://github.com/hock/Manifest">Documentation</a></li>
				  </ul>
				</nav>
				<div class="clear"></div>
			</div>
		</div>
		<h1>Sourcemap Dataset</h1>

		<p class="callout">This page provides an index of the data collected by the MIT Center for Civic Media's Sourcmap Project from 2006-2014. That means that this data is <em>old</em>. Because Sourcemap evolved significantly during this relatively long span of time, and because one of the development goals was to avoid breaking user projects, it also means this data is <em>inconsistent</em>. Some attributes and properties that were added in, for example, 2008, probably didn't exist in 2006. And it is also true that some early attributes and properties were depreciated or changed over time. While these have been preserved in the raw data files referenced below, only a subset of more or less standard information is directly viewable in Manfest.</p>
		
		<div id="dataviewer">
			<input type="text" placeholder="Search the dataset..." id="searchField" />
			<div id="table-sortable"></div>
		</div>
		
	</div>
	
	<script src="../../lib/js/jquery.js"></script> <script src="../../lib/js/fontawesome.js"></script>
	<script src="../../lib/js/table-sortable.js"></script> 
		
	<script>		
		$( document ).ready(function() {
			
			// UI Setup
			$("#minfo-hamburger, #minfo").click(function() { $("#minfodetail").toggleClass("closed");  });				
			$.getJSON("../../data/samples.json", function(d) { 
				for(var s in d) { 
					$("#load-samples").append('<option value="'+s+'">'+d[s]+'</option>'); 
				} 
			});
			$("#load-samples-btn").click(function() {
				var id = $("#load-samples").val();
				window.location.href = "../../#"+id;
			});
			
			// Load SMAP index
			$.getJSON("smapindex.json", function(d) {
				var data = JSON.parse(d);
				$.each(data, function( index, value ) {
				  data[index].json = "<a href='https://raw.githubusercontent.com/hock/smapdata/master/data/"+value.id+".json'>json</a>";
				  data[index].geojson = "<a href='https://raw.githubusercontent.com/hock/smapdata/master/data/"+value.id+".geojson'>geo</a>";			  
				});
				var colorchoice = [["#3498DB","#dbedf9"],["#FF0080","#f9dbde"],["#34db77","#dbf9e7"],["#ff6500","#f6d0ca"],["#4d34db","#dfdbf9"]];
				
				var columns = { 'id': 'ID', 'nm': 'Name', 'dc': 'Description', 'json': 'json', 'geojson': 'geo', }
				
				var table = $('#table-sortable').tableSortable({
				    data: data, columns: columns, rowsPerPage: 100, pagination: true, searchField: $('#searchField'),
					tableDidMount: function() { this.sortData("id"); },
				    formatCell: function(row, key) {
				        if (key === 'id') {
							var ind = row['id'] % 5;
							
				            return $('<span></span>').append("<div class='dot' style='background:"+colorchoice[ind][0]+"; border-color:"+colorchoice[ind][1]+";'></div>");
						
						}
				        if (key === 'nm') {
				            return $('<span></span>').append("<a href='https://supplystudies.com/manifest/#smap-"+row['id']+"'>"+row[key]+"</a>");
				        }
				        return row[key];
				    },
				});			
			}); // End load SMAP index		
		}); // End document.ready
	</script>
</body>
</html>