@media only screen {
	.loading #loader { display:block; position:absolute;z-index:50000;height:100%;width:100%;text-align:center;background:#4d34db; left:0; top:0; } 
	.loading #loader #loadermessage { color:#fff; } .loading #loader #loadermessage a { color:#fff; } .loading #loader h1 { color:#fff; } .loading #loader h2 { color:#eee; }

	#loader { display:none; position:absolute;z-index:50000;height:100%;width:100%;text-align:center;background-color: var(--m-purple-bright); left:0; top:0;
		#loadermessage { color:#fff; a{color:#fff;text-decoration:underline}}
		h1 { color:#fff; position:relative;margin:20% auto 2.5rem;height:0;padding-top:70px;text-align:center;background:url("../images/logo.svg") center top no-repeat;} 
		h2 { color:#eee; font-size:1em}
	} 

	body { 
		font-family: "Roboto", Arial, Helvetica, sans-serif; font-weight: normal; font-size: 1em; margin: 0; width:100%; min-width: 760px; height: 100%; max-height:100%; 
		color: var(--main-text); background-color: var(--primary-bg); overflow:hidden;
		--m-purple-bright:#4d34db;--m-purple-light:#cfbcff;--m-purple-alt:#5e45ec;--m-purple-control:#4d34db;--m-purple-text:#fff;--m-grey:#e5e5ea;--m-grey-trans:#e5e5eaE6;--m-grey-border:#aca9b9;--main-bg:#e5e5ea;--primary-bg:#ffffff;--primary-bg-trans:#ffffffF2;--primary-bg-trans-2:#ffffffAA;--controls-bg:#ffffff;--inverse-bg:#ffffff;--alt-bg-1:#edebfb;--alt-bg-2:#f6f5fd;--main-text:#000000;--primary-text:#000000;--secondary-text:#333333;--tertiary-text:#999999;--disabled-text:#cccccc;--bright-border:#dfdbf9;--sep-border:#dddddd;--bright-color:#ffffff;--link-color:#4d34db;--link-highlight-color:#DC143C;--overlay-bg:#000000dd;--overlay-text:#ffffff;--map-bg:#c4d9f0;--m-intro-secondary:#e5e5ea;--sample-list-header:#666666;--sample-list-text:#999999;--viz-bg: #21222c;--zebra: #2a2c37;--viz-label-text:#aca9b9;
		&:is(.storymap, .embedmap) { #colorscheme-switch {display:none;} } 
	}

	h1 { font-weight: bold; font-size: 2em; letter-spacing: -1px; color: var(--tertiary-text);} 
	h3 { font-weight: bold; margin:0; padding:1rem 0 0 0;}
	a, a:visited {text-decoration: none; color:var(--link-color); }
	a:hover { text-decoration: underline; color:var(--link-highlight-color); }
	textarea, input { outline: none; }
	select { cursor:pointer; background-color:var(--controls-bg); }

	/* General / common classes */
	.closed { display:none !important; }
	.clear { clear:both;}
	.mobiletext {display:none;}
	.fulltext {display:initial;}
	.blur { filter:blur(0.2rem) saturate(0) }
	@-webkit-keyframes fadeIn { from { opacity: 0; } to { opacity: 1; }}
	@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; }}

	body.fullscreen {
		#view-wrapper { width: 100%; }
		#messages { left:18rem; width:calc(100% - 18rem - 9rem); }
		#sidewrap { background:none; box-shadow:none; border:none; }
		#sidepanel {visibility: hidden; overflow:hidden;}
		.leaflet-control-zoomhome {margin-top:6rem; }	
		&.launcher { 
			.leaflet-left .leaflet-control {margin-left: 29rem; } 
			.leaflet-control-zoomhome {margin-top:1rem; }
		}
	}

	#sidewrap {
		width:29rem;height:100%;background:var(--main-bg); border-right:1px solid var(--main-bg);position:absolute;top:0;left:0;z-index:10001;box-shadow:0.25rem 0.25rem 1rem rgba(0,0,0,0.1);	
		#sidepanel { 
			border-radius:0.25rem; position: absolute; top: 4rem; left: 0; bottom: 0; z-index:12000; margin:1rem; width: 27rem; *height: 100%; overflow: auto; box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.05); overflow-wrap: break-word; background: var(--primary-bg);	
		} 
	}
	#manifestbar { 
		border-radius:0.25rem; position: absolute; top: 0; left: 0; margin:1rem; width: 25rem; height:auto; padding:1rem 1rem 1rem 1rem; font-size:1.2rem; z-index:12500; box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2); overflow-x:scroll; background:var(--m-purple-bright); color:var(--m-purple-text); max-height: calc(100% - 4rem);
		#minfoheader {
			background:var(--m-purple-bright);position:sticky;top:-1rem;padding:1rem;margin:-1rem;
			#minfo { 
				cursor:pointer; margin-left:0.25rem; width:calc(100% - 4rem); display:inline-block; vertical-align:bottom; white-space: nowrap; overflow:hidden; text-overflow:ellipsis;
				#logotype { letter-spacing:-0.05rem;}
			}
			#minfo-hamburger {cursor:pointer; width:1rem; vertical-align:baseline; }
		}
	} 

	#view-wrapper { 
		background:var(--map-bg); overflow:hidden;  position: absolute; top: 0; right: 0; bottom: 0; width: calc(100% - 29rem); *height:100%; 
		#map { position: absolute; top: 0; right: 0; bottom: 0; width:100%; *height:100%; background:var(--map-bg); }
		#vizwrap { width:100%; }
	}

	#manifestlist { 
		.manifest { position: relative; top: 0; margin:0; }
		.mheader { 
			position: sticky; top: 0; bottom:0; margin:0; z-index:1;
		}	
		.mtitle { 
			padding:1rem; font-size:1rem; z-index:12000; border-bottom:1px solid var(--bright-border); font-weight:bold; background:var(--primary-bg); color:var(--main-text);
			&:hover { filter: brightness(120%); }
			a { text-decoration:none; max-width: calc(100% - 4.5rem); display: inline-block; white-space: nowrap; 
				vertical-align:middle; overflow:hidden; text-overflow:ellipsis; color:inherit;
				&:hover { text-decoration:underline; cursor:pointer;}
			}
			i { vertical-align:middle; width:1rem;}
		}
		.mdetails {
			.share-container { 
				.share-menu { list-style:none; padding: 0.5rem 1rem; margin:0; 
					span { color:var(--secondary-text); }
					li { display:inline-block; background:var(--primary-bg); padding:0.25rem 0.5rem; border-radius:0.5rem; cursor:pointer; opacity:0.8;
						&:hover { opacity:1; }
					}
				} 
			}
		}
		.mdescription { 
			font-size:1rem; padding:1rem; margin:0; line-height:1.2rem;
			color:var(--secondary-text); background:var(--primary-bg); border-bottom:1px solid var(--sep-border); 
			img, iframe { width:100%; }
			img + img { margin-top:0.25rem;}
			.cite { font-size: 0.8rem; background: var(--m-grey); border: thin solid var(--sep-border); border-radius: 0.25rem; margin-top:1rem; padding: 0.4rem; * { font-size:0.8rem;}}
			> p { padding:0; margin:0;}
			> p + p {
				margin-bottom:1rem;
			}
			blockquote {
				margin-left:0;margin-right:0;padding-left:0.4rem;padding-right:0.4rem;border-left:0.2rem solid var(--m-grey-border);
			}
			&:empty { padding:0;}
	
		}
		.mlist { list-style:none; margin:0; padding:0; }
		.mnode {
			padding:0.5rem 1rem; border-bottom:1px solid var(--sep-border); margin:0 auto;
			&:focus { outline: none;}
			.node-dot { 
				cursor:pointer; height:1rem; min-width:1rem; border-radius:1rem; border:0.2rem solid; margin:0 0.2rem 0 0rem; padding:0 0.1rem; float:left; text-align:center; font-size:0.5rem; line-height:1rem; color:var(--overlay-text); border-color: var(--alt-bg-1); background:var(--alt-bg-1); 
			}
			.node-title { display:inline; font-size:1rem; line-height:1.5rem;}
			.node-place { font-size:0.9rem; margin:0.25rem 0; line-height:1.2rem;}
			.node-time { font-size:0.9rem; margin:0.25rem 0; line-height:1.2rem;}
		
			.node-details {
				margin:0.25rem 0; line-height:1.2rem;
				.category {
					display:block; font-size:0.8rem; color:var(--tertiary-text);
					.cat-link {display:inline-block; text-decoration:underline;cursor:pointer; margin-right: 0.25rem;}
					&.closed { display:none; .cat-link { display:none;} }
				}
				.measures { 
					display:block; font-size:0.8rem; color:var(--tertiary-text);
					.measure-link { display:inline-block; text-decoration:underline;cursor:pointer; margin-right: 0.25rem;}
					.mtype:after { content: ": ";}
				}
			}	
			.node-images-wrap {
				margin:0.8rem 0;
				&:not(:has(*)) { margin:0; }
				.node-images { height: calc(100vh / 4); margin:0; position:relative; background:var(--inverse-bg); border-radius:0.25rem; 
					.ftimg { 
							object-fit:cover; object-position:center center; height:0; min-height:calc(100% - 1px); width:calc(100% - 2px); cursor:zoom-in; display:none; border: 1px solid var(--sep-border); border-radius:0.25rem;
							&:first-child{ display:block;}
					 }
				}
				.images-caption { text-overflow:ellipsis;white-space:nowrap;display:inline-block;overflow:hidden;height:auto;width:100%;font-size: 0.8rem;padding: 0.4rem 0 0 0; color:var(--tertiary-text);
					&:empty { display:none; }}
				.images-controls { display:flex;align-items:center;justify-content:center;background:var(--alt-bg-2);border:1px solid var(--sep-border);border-radius:0 0 0.2rem 0.2rem; }
			
				.images-box { position:relative; display: flex; align-items: center; justify-content: center; width:22rem; margin:0 auto; padding: 0.6rem 0; flex-basis:22rem; flex-wrap:wrap;
					.images-spot { font-size:0.6rem; margin:auto 0.2rem; cursor:pointer; padding: 0.2rem 0; color:var(--primary-text); opacity:0.6; }
				}
				.images-button { overflow:auto; padding:0 0.5rem; font-size:1.5rem; border:none; background:var(--alt-bg-2); color:var(--primary-text); opacity:0.6; }
			}
			.node-description { margin:0.25rem 0; line-height:1.1rem; font-size:0.9rem; color:var(--secondary-text);
				p { margin:0.5rem 0 0.5rem 0;}
				blockquote {
					margin-left:0; margin-right:0; padding-left: 0.4rem; padding-right: 0.4rem;
					border-left:0.2rem solid var(--sep-border);
				}
			}
			.node-sources { border-radius:0.25rem; padding:0.25rem; margin-top:0.75rem; color:var(--secondary-text);
				summary { font-size:0.9rem; cursor:pointer; outline: none; padding:0.2rem 0;}
			}
			ul { font-size:0.8rem; padding-left:0.5rem; list-style:disc;
				li { border:none; padding:0.25rem;}
			}
			img { width:100%; }
			iframe { width:100%; }
		}
	}

	#time-slider {
	    display:none; 
	}
}

/* Compressed/Mobile Styles */
@media only screen and (max-width: 920px) and (orientation: portrait) { 
	body {  
		&.storymap { 
			#manifestlist .mtitle { font-size:2rem; padding-top: 6rem; padding-bottom: 2rem;}
			#manifestlist .mtitle { background-position:center bottom 7rem;}
		}
		&:is(.storymap, .embedmap) { #colorscheme-switch {display:none;} }
		&:not(.storymap, .embedmap) {
			display: flex; flex-flow: column wrap; width:100vw; min-width:100vw; max-width:100vw; 
			#mapmenu, #mapcapture, #fullscreen-menu, .leaflet-control-layers, #mapcapture, .leaflet-control-zoomhome, .leaflet-control-attribution, .fulltext, .fas.closemap, .leaflet-left .leaflet-control, .leaflet-popup-pane, .leaflet-tooltip-pane, .footer, .share-button, #time-slider {display:none;}
	
			#manifestbar { position: absolute; width:calc(100% - 1rem); display:block; margin:0.5rem; padding:0; border-radius:0.5rem; border:none; z-index:13000; overflow-x:scroll; max-height: calc(100% - 4rem);
				#minfoheader { background:#4d34db;position:sticky;top:0;padding:0.75rem 1rem;margin:0;}
				#minfodetail { padding:0.1rem 1rem 1rem 1rem; margin:0; box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2);}
			} 
			#loadlistpanel #loadlist-group-samples #samples-previews.open:not(.scroll), #loadlistpanel #loadlist-group-samples #samples-previews.open.scroll { 
			    width: calc(100% - 4rem);
			}
			#view-wrapper { 
				position: absolute; top:0; height: 100%; width: 100%; display: block; outline:none;
				#map { position: relative; top:0; height: 100%; width: 100%; display: block; outline:none;}
				.vizmenu { top: 4rem; right:0.5rem; 
					.vizmenu-entry { 
						margin-left:0.5rem;
					}
					.label-title { display:none; }
					
					#viz-choices, #measure-choices {
						background:var(--m-grey);border:1px solid var(--m-grey-border); color:var(--secondary-text);
						text-align:center; text-align-last: center; padding:0.25rem; line-height:1rem;
						box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2); border-radius: 1rem; 
						option { text-align:center; text-align-last: center; }
				
					}
				}
				.searchwidget {
					top:4rem; left:0.5rem; bottom:auto;
					font-size:0.8rem;
					background:var(--m-grey);border:1px solid var(--m-grey-border); color:var(--secondary-text);
					text-align:center; line-height:0.8rem;
					box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2); border-radius: 1rem;
					padding:0.25rem;
					min-width:auto;
					input { width:auto;}
					#searchbar { line-height: 1rem; font-size: 0.8rem; background:var(--m-grey); color:var(--secondary-text);}
				}
			}
			#sidewrap { position: absolute; width: 100%; display:block; margin:0; padding:0;border-radius:0; border:none; box-shadow:none; background:transparent; top: calc(60% + 3.5rem); height: 100%; transition:top 0.25s ease; 
				#sidepanel { position: relative; width: calc(100% - 1rem); display:block; margin:0 0.5rem 0.5rem 0.5rem; padding:0;border-radius:0.5rem; border:none; box-shadow:none; top:0; height: calc(100% - 0.5rem); box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2);
					ul, li { overflow:hidden; }	
				} 
				&.top { top: 6.5rem; height: calc(100% - 6.5rem); } 
				&.middle { top: calc(60% + 3.5rem); height: calc(40% - 3.5rem); max-height:100%;} 
				&.bottom { top: calc(100% - 3.9rem); height: 3.9rem; }
			}
			#colorscheme-switch { top:1.5rem; z-index:13000;}

			.mtitle { height:1.4rem; border-color: var(--alt-bg-1); } 
			.node-details, .node-title, .node-place { display:inline; margin-right:0.5rem;}

			#manifestlist .mnode {padding:0.5rem 0.5rem;border-bottom:0.5px solid var(--sep-border);width:calc(100% - 1rem);margin:0 auto;overflow:hidden; color:var(--secondary-text);  border-color: var(--sep-border); }
			#manifestlist .node-sources ol p { margin:0; }
			#manifestlist .mdescription { padding:1rem 0.5rem;}
			#messages {position:absolute;left:0; bottom:0; background:rgba(0,0,0,0.8); padding:1rem;z-index:11000;font-size:1rem; margin:0.5rem; width:calc(100% - 3rem); display:block;}
			#textview .container { font-size:1rem;}
	
			.mobiletext {display:initial;}
		}
	}
 }