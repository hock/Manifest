/* Manifest Default Stylings */

.vizwrap {
	display:inline-block;position:relative;width:100%;height:100%;padding-bottom:100%;vertical-align:middle;overflow:hidden; 
	&.closed { display:none; }
	.vizsvg{display:inline-block;z-index:10000;position:absolute;top:0;left:0;width:100%;height:100%;}
}

.vizmenu {
	position:absolute; top:1rem; right: 0.8rem; z-index:12250; background:var(--primary-bg);
	box-shadow: 0.1rem 0.1rem rgba(0,0,0,0.2); border-radius:.25rem; padding: .375rem .25rem .375rem .25rem;
	.vizmenu-label { 
		font-size:0.8rem;padding:0;display:block;color: var(--tertiary-text); border: 1px solid var(--sep-border);
		border-radius:0.25rem;background:var(--alt-bg-1);
	}
	.label-title { display:block;padding:0.1rem 0.375rem; color: var(--viz-label-text); }
	.vizmenu-entry { float:left; }
	.vizmenu-entry + .vizmenu-entry { margin-left:0.5rem; }
	
	#viz-choices { 
		padding:.375rem;font-size:1rem;font-weight:400;line-height:1.5;vertical-align:middle;
		border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;outline:none;
		color: var(--secondary-text); background-color: var(--controls-bg); min-width:5rem;
		border: none; border-radius: 0 0 0.25rem 0.25rem;
		
	}
	#measure-choices { 
		padding:.375rem;font-size:1rem;font-weight:400;line-height:1.5;vertical-align:middle;
		-webkit-appearance:none;-moz-appearance:none;outline:none;
		text-transform:capitalize;color: var(--secondary-text); background-color: var(--controls-bg); min-width:5rem;    
		border: none; border-radius: 0 0 0.25rem 0.25rem;
	}
}

#viztooltip { 
	display:none; font-size:0.8rem; padding:1rem; background:var(--controls-bg); border:2px solid var(--controls-bg); border-radius:0.5rem; max-height:22rem; width:18rem; 
	overflow:scroll; position: absolute; z-index: 10000; 
	h3 { margin:0; padding:0;}
	h5 { position:absolute; top:0; right:0; margin:0.5rem; padding:0; opacity:0.5; text-align:right;}
	a { color:inherit;}
}

#missing-viz { 
	z-index:11000;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;display:flex;align-items:center;justify-content:center;opacity:0.2;
	i {font-size:30rem;display:block;}
}

/* Chart */
#chartview {
	z-index:10000;width:100%;height:100%;position:absolute;overflow:scroll;
	.measurebar {
		display:inline-block;border-radius:0 1rem 1rem 0;color:#fff;vertical-align:bottom;padding:0.25rem;font-size:0.6rem; 
		overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
		&::after {content:attr(data-content);display:inline-block;}
	}
	#charttable {
		display:block;margin:2rem 1rem 1rem 1.8rem;padding:0 0 1rem 0;border:1px dashed;border-top:none;
		border-radius:0 0 1rem 1rem; overflow:auto;width:calc(100% - 3.6rem);border-spacing:0;height:calc(100% - 7.8rem);
	}
	.chartlabel {
		display:inline-block;text-align:right;width:calc(20% - 1rem - 2px);
		padding:0.2rem 0.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-right:2px solid var(--viz-bg);
	}
	.chartmeasure {display:inline-block;padding:0.2rem 1rem 0.2rem 0.5rem;width:calc(80% - 1.5rem);}
	th {
		display:inline-block;position:absolute;padding:0.5rem;font-size:0.8rem;cursor:pointer;color:var(--viz-bg);text-transform:capitalize;
		&.chartlabel {text-align:center;border-radius:1rem 0 0 0;top:1rem;left:calc(1.8rem);width:calc(20% - 1.8rem);}
		&.chartmeasure {text-align:center;border-radius:0 1rem 0 0;top:1rem;right:calc(1.8rem);width:calc(80% - 4rem + 1px);}
		&.asc:after {content:' \2193';}
		&.desc:after {content:' \2191';}	
	}
	tr {display:inline-block;width:100%;}
	td{ display:inline-block;}
	tbody {width:100%;display:block;}
}

body.fullscreen #chartview #charttable th.chartlabel,body.fullscreen #chartview #charttable th.chartmeasure{top:5.5rem;}
body.fullscreen #chartview #charttable{margin-top:6.5rem;height:calc(100% - 12.4rem);}

/* Force Graph */
.forcegraph {
	line {stroke:#999;stroke-opacity:0.6;stroke-width:0.2rem;}
	text {font-size:0.8rem;}
	circle {
		stroke-width:0.2rem;cursor:pointer;
		&:hover { fill:#fff !important;cursor:pointer; }
	}
}

/* Text View */
#textview {
	position:relative;padding:0 2rem 0 2rem;z-index:11000;background:var(--viz-bg);width:calc100%;height:100%;font-size:1rem;overflow:auto;
	.container {
		width:100%;font-size:1rem;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;
		span {
			&.key{color:#9682f6;}
			&.string{color:#ec81be;}
			&.number{color:#8cf881;}
		}
	}
	.blob {
		width:100%;margin:1rem 0;color:#f2f2f2;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace; 
		h2 {
			margin:0;font-size:1.2rem;font-weight:400;
			.raw-downloads {
				a {color:#f2f2f2;text-decoration:underline;cursor:pointer;}
			}
			.rawtitle {
				box-shadow:0.1rem 0.1rem rgba(0,0,0,0.2);display:inline-block;color:#f2f2f2;font-size:1.2rem;
				font-family: "Roboto", Arial, Helvetica, sans-serif; font-weight: normal;
				background:#2a2c37;padding:1rem 0.5rem;border-radius:0.25rem;
				i {display:inline-block;margin-right:0.5rem;}
			}
		}
	}
	&.closed { display:none; }
}
body.fullscreen #textview{padding:4rem 1rem 0 1rem;width:calc(100% - 2rem);}

#listview {
	z-index:11000;background:var(--viz-bg);width:100%;height:100vh;position:absolute;
	#datalist {
		margin:6rem 1rem 1rem 1rem;overflow-y:auto;overflow-x:hidden;height:calc(100% - 7rem); width:calc(100%-2rem);
		div.dot { 
			cursor:pointer; height:1rem; width:1rem; border-radius:1rem; border:0.2rem solid; margin:0 0.2rem 0 0rem; float:left; text-align:center; font-size:0.8rem;
			background:#4d34db; border-color:#efecfa; color:#efecfa;
		}
		.col { color: var(--m-purple-text); width:calc(10% - 0.5rem); padding:0.25rem; display:inline-block; overflow-y:auto; max-height:5rem; text-wrap: wrap; vertical-align:top;}
		
		ul {
			list-style:none; margin:0.5rem 0; padding:0;
			li.entry { 
				padding:0.5rem 0.5rem 0.5rem 0.5rem; white-space: nowrap; width:100%;
				&:nth-child(odd) { background:var(--zebra); } 
				span { display:inline-block;}
		 		.index { width:calc(5% - 0.5rem); text-align:center; }
				.name  { width:calc(15% - 0.5rem); }
				.description { width:calc(30% - 0.5rem);
					p { display:inline; padding:0; margin:0;}
					ul { display:inline; padding:0; margin:0;}
				 }
			 }
			 &.pagination { display:block; position: absolute; top: 1rem; left: 32rem;}
			 &.pagination { 
				 li { cursor:pointer; padding:0.25rem; display:inline-block; border-radius:0.25rem; margin:0 0.25rem;
					 &.active { background:var(--controls-bg); }
				 }
			}
		}
		#datasort { 
			padding:0.5rem 0.5rem 0.5rem 0.5rem; position:sticky; top:0; background:var(--m-purple-bright); border-radius:0.25rem; white-space: nowrap; width:100%;
			.sort {
				text-decoration:underline; cursor:pointer; 
		 		&.index { width:calc(5% - 0.5rem); text-align:center; }
				&.name  { width:calc(15% - 0.5rem); }
				&.description { width:calc(30% - 0.5rem);}
				&.asc::after{content:"\025B2";padding-left:0.25rem;font-size:0.9rem; color:#999; vertical-align:middle; text-decoration:none; display:inline-block;}
				&.desc::after{content:"\0025BC";padding-left:0.25rem;font-size:0.9rem; color:#999; vertical-align:middle; text-decoration:none; display:inline-block;}
			}

		}
		#datasearch { 
			border:1px solid var(--sep-border); border-radius:0.25rem;position:absolute;top:1rem;font-size:1rem;padding:1rem;width:30rem;margin:0; background:var(--controls-bg); color:var(--primary-text);
			&::placeholder { color:var(--secondary-text); }
		}
	}
}
body.fullscreen {
	#datasearch { left:30rem; }
	#listview #datalist .pagination { left: 61rem;}
}

.loading {
	#loader { display:block !important; overflow:scroll; }
}
/* Storymap */
body.storymap 
{
	#storybanner { 
		z-index:12250; position:sticky; top:0; width:calc(100% - 6rem); background:#fff; color:#fff; margin-top:-4rem; padding: 1rem 2rem 1rem 4rem;
	    background:url(../images/logo-bw.svg) no-repeat;background-position:2rem center;background-size:1.5rem;
		a { color:#fff; font-weight:bold;}}
	#sidewrap {
		width:100%; background:none;
		#sidepanel { top:0;left:auto;right:0;width:100%;margin:0;border-radius:0;background:none;}
	}
	.map {background:#fff;} 
	#manifestlist {
		.mheader { position:relative; z-index: 12500; .menu-options{ display:none; }}
		.mtitle {
			padding:1rem 2rem;font-size:4rem;width:calc(100% - 4rem);margin:0; padding-top:15vh;
			box-shadow:0.1rem 0.1rem rgba(0,0,0,0.2); text-align:center; background:none;
			a {width:auto;display:initial;white-space:initial; }
			&:hover {filter:none;}
			.menumap {
				background:url(../images/logo-bw.svg) no-repeat;background-position:center center;display:block;margin:0 auto;width:10rem;height:10rem;
				&:before { content:""; }		
			}
		}
		.mdescription {
			font-size:1rem;line-height:1.5rem;width:85vw; padding: 3rem 1rem 2rem 1rem; margin:-1rem auto 15vh auto;border-radius:0.5rem; text-align:center;
			box-shadow:0.1rem 0.1rem rgba(0,0,0,0.2);
			* { font-size:1.25rem; }
		}
		.node-details,.node-dot { display:none; } 
		.mlist {width:45vw;}
		.mnode {
			border:none;font-size:1rem;padding:1rem; margin-left:calc(55vw - 3rem);margin-top:75vh;margin-bottom:75vh;background:var(--primary-bg-trans); border-radius:0.5rem; width:100%;
			box-shadow:0.1rem 0.1rem rgba(0,0,0,0.2);
			&:nth-child(even) {
				margin-left:1rem;
			}
			* { font-size:1rem; }
			+.mnode {margin-top:75vh;margin-bottom:75vh;}
			.node-title { font-size:2rem; padding-top:1rem; line-height:initial;}
			.node-images-wrap {
				.node-images { height:auto; background:none; 
					&.multiple { padding-bottom:0; }
					img.ftimg { object-fit:contain; object-position:center center; height: auto; width:calc(100% - 2px); max-height:75vh; min-height:calc(100% - 1px);}
					iframe.ftimg { object-fit:contain; object-position:center center; height:615px; width:calc(100% - 2px); max-height:75vh; min-height:calc(100% - 1px); }
				} 
				.images-controls { border-top:0; }
				.images-caption { white-space:wrap;overflow:auto;height:auto;width:100%;font-size: 0.8rem;padding: 0.4rem 0 0 0; color:#666;
					&:empty { display:none; }}
			}
		}
	}
	#view-wrapper { width:100%;left:0;right:auto;}
	.leaflet-control {display:none;}
	#mlist-1029261216 #node_10292612160000 .node-details .measures { display:none;} 
	#manifestbar,.footer,.searchwidget,#mapmenu,#fullscreen-menu,#mapcapture,.leaflet-popup-pane,.closemap,.vizmenu,#time-slider {display:none;}
}

/* Storymap */
body.embedmap 
{
	#storybanner { 
		z-index:12250; position:sticky; top:0; background:#fff; color:#fff; padding:0.5rem 1rem 0.5rem 2.5rem; margin:1rem;border-radius:0.5rem;  
	    background:url(../images/logo-bw.svg) no-repeat;background-position:1rem center;background-size:1.25rem;
		a { color:#fff; font-weight:bold;}}
	#sidewrap {
		width:100%; background:none; pointer-events: none;
		#sidepanel { top:0;left:auto;right:0;width:100%;margin:0;border-radius:0;background:none;}
	}
	.map {background:#fff;} 
	#manifestlist {
		pointer-events: auto;
		.mheader { display:none; }
		.mtitle {
			a {width:auto;display:initial;white-space:initial; }
			&:hover {filter:none;}
		}
		.mdescription {
			display:none;
		}
		.node-details,.node-dot { display:none; } 
		.mlist {
			pointer-events:auto;width:100%;height:auto;display:flex;list-style:none;margin:0;padding:0;overflow-x:scroll;overflow-y:hidden;
			scroll-behavior:smooth;scrollbar-width:none;position:absolute;bottom:0;
		}
		.mnode {
			border:none;font-size:1rem;padding:0.5rem; background:var(--primary-bg-trans); border-radius:0.5rem; color:var(--primary-text);
			width:calc(100% - 3rem);min-width:calc(100% - 3rem);height:2.5rem;margin:1rem;
			
			* { font-size:1rem; }
			.node-title { font-size:1rem;padding:0;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;width:70vw;line-height:1.1rem;}
			.node-description { 
				font-size:0.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-top:0.2rem;width:100%;line-height:1.1rem;color:var(--secondary-text); 
				* { font-size:0.8rem; display:inline;}
			} 
			.node-place { 
				font-size:0.8rem;float:right;display:inline-block;width:calc(100% - 70vw);overflow:hidden;text-overflow:ellipsis;white-space:nowrap; 
				text-align:right; margin:0;line-height:1.1rem; 
			}
			.node-time, .node-sources { display:none;}
			.node-images-wrap {
				display:none;
				.node-images { height:auto; background:none; 
					&.multiple { padding-bottom:0; }
					img.ftimg { object-fit:contain; object-position:center center; height: auto; width:calc(100% - 2px); max-height:75vh; min-height:calc(100% - 1px);}
					iframe.ftimg { object-fit:contain; object-position:center center; height:615px; width:calc(100% - 2px); max-height:75vh; min-height:calc(100% - 1px); }
				} 
				.images-controls { border-top:0; }
				.images-caption { white-space:wrap;overflow:auto;height:auto;width:100%;font-size: 0.8rem;padding: 0.4rem 0 0 0; color:#666;
					&:empty { display:none; }}
			}
		}
	}
	#view-wrapper { width:100%;left:0;right:auto;}
	.leaflet-control {display:none;}
	#mlist-1029261216 #node_10292612160000 .node-details .measures { display:none;} 
	#manifestbar,.footer,.searchwidget,#mapmenu,#fullscreen-menu,#mapcapture,.leaflet-popup-pane,.closemap,.menumap,.vizmenu,#time-slider {display:none;}
	
	#embed-left {
		width:3rem;padding:0 1rem;height:calc(50vh);top:calc(50vh);font-size:3rem;position:absolute;left:1rem;color:var(--controls-bg);z-index:1;overflow:hidden;opacity:1;
		text-shadow: -0.15rem 0rem 0.1rem rgba(0,0,0,0.2); cursor:pointer; -webkit-text-stroke: 1px var(--controls-bg);
		&:hover { opacity:0.8;}
	}
	#embed-right {
		width:3rem;padding:0 1rem;height:calc(50vh);top:calc(50vh);font-size:3rem;position:absolute;right:1rem;text-align:right;color:var(--controls-bg);z-index:1;overflow:hidden;opacity:1;
		text-shadow: 0.15rem 0rem 0.1rem rgba(0,0,0,0.2); cursor:pointer; -webkit-text-stroke: 1px var(--controls-bg);
		&:hover { opacity:0.8;}
	}
}

@media only screen and (max-device-width: 920px) { 
	.vizwrap{position:relative;top: 0; height:100%; width:100%;display:block;}
	.vizwrap.closed { display:none; }
	
	.vizsvg {position:relative;height:100%;width:100%;display:block;}
	.vizmenu, .vizmenu { background:none; border:none; }
	.vizmenu { position: absolute; display:block; box-shadow:none; padding:0;  top: 0.75rem; right:1rem;  z-index:11000;} 

	.vizmenu-entry { padding:0; display:inline-block; float:none; background:none; border-color:#fff;}
	.vizmenu-entry select {width:100%; }
	.vizmenu #viz-choices, .vizmenu #measure-choices { font-size:0.8rem;}
	.vizmenu #viz-choices, .vizmenu #measure-choices { color: #fff; background-color: rgba(0,0,0,0.2); border-color: rgba(0,0,0,0.4); }
	
	.vizmenu #measure-choices { margin-right:0;}
	.vizmenu .vizmenu-label { background:none; border:none; }
	.vizmenu .label-title { display:none;}
	#viztooltip { display:none;}
	#textview, #listview {font-size:1rem;top:3.5rem;height:calc(100% - 3.5rem);width:calc(100% - 2rem);position:absolute;padding:0.2rem 1rem;}
	#datalist {
	    margin: 1rem 0.5rem;
	    overflow: auto;
	    height: calc(100% - 1.5rem);
	}
	#datalist .pagination { left:24rem;}
	.dataviewer ul li.entry div.description, #datasort .sort.description { width:10%;}	
	.dataviewer ul li.entry div.col, #datasort .sort { border-right:none;}
	.dataviewer ul li.entry div.col {
		display:inline-block; width:auto !important;
	}
	.dataviewer ul li.entry div.col.manifest {
		display:none;
	}
	
	.dataviewer ul li.entry div.description, #datasort .sort.description { width: 100%; }
	.dataviewer ul li.entry div.index { width:100%; }
	#datasort {display:none;}
	.dataviewer ul.pagination{display:block;position:static;}
	#datasearch{position:static; width:100%;}
	
	#chartview {
		#charttable { margin:8rem 1rem 1rem 0.5rem;width:calc(100% - 1rem);height:calc(100% - 12.8rem); }
		th.chartlabel { top:6.5rem;left:calc(0.5rem);width:calc(20% - 1.3rem); }
		th.chartmeasure { top:6.5rem;right:calc(0.5rem);width:calc(80% - 2.4rem + 1px); }
	}
}
@media only screen and (min-device-width: 768px) and (max-device-width: 920px) { 
	#chartview th.chartlabel, #chartview th.chartmeasure {
	    top: 4rem;
	}
	#chartview #charttable {
		margin-top:5rem;
		height: calc(100% - 9.8rem);
	}
}