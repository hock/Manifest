/*! Manifest 2021-06-24 */

function StaticInit(){$("#minfo-hamburger, #minfo").click(function(){$("#minfodetail").toggleClass("closed")})}function SmapDataTableInit(){$.getJSON("json/smapindex.json",function(t){var n=JSON.parse(t);$.each(n,function(t,e){n[t].json="<a href='https://raw.githubusercontent.com/hock/smapdata/master/data/"+e.id+".json'>json</a>",n[t].geojson="<a href='https://raw.githubusercontent.com/hock/smapdata/master/data/"+e.id+".geojson'>geo</a>"});var a=[["#3498DB","#dbedf9"],["#FF0080","#f9dbde"],["#34db77","#dbf9e7"],["#ff6500","#f6d0ca"],["#4d34db","#dfdbf9"]];$("#table-sortable").tableSortable({data:n,columns:{id:"ID",nm:"Name",dc:"Description",json:"json",geojson:"geo"},rowsPerPage:40,pagination:!0,searchField:$("#searchField"),tableDidMount:function(){this.sortData("id")},formatCell:function(t,e){if("id"!==e)return"nm"===e?$("<span></span>").append("<a href='#smap-"+t.id+"'>"+t[e]+"</a>"):t[e];t=t.id%5;return $("<span></span>").append("<div class='dot' style='background:"+a[t][0]+"; border-color:"+a[t][1]+";'></div>")},responsive:{1226:{columns:{id:"ID",nm:"Name"}}}})})}!function(n){var a={};function i(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=jQuery},function(t,e,n){t.exports=n(3)},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o={};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.r(o),n.d(o,"_isArray",function(){return h}),n.d(o,"_isNumber",function(){return f}),n.d(o,"_isObject",function(){return p}),n.d(o,"_isFunction",function(){return m}),n.d(o,"_isString",function(){return _}),n.d(o,"_isDate",function(){return b}),n.d(o,"_sort",function(){return v}),n.d(o,"_keys",function(){return y}),n.d(o,"_forEach",function(){return P}),n.d(o,"_filter",function(){return k}),n.d(o,"_invariant",function(){return C}),n.d(o,"_nativeCompare",function(){return w}),n.d(o,"debounce",function(){return E}),n.d(o,"_lower",function(){return D}),n.d(o,"lookInObject",function(){return x}),n.d(o,"_inRange",function(){return S});function s(t,e,n){return{node:t,attrs:e,children:n}}function l(t){var e=t.node,n=t.attrs;return t.children,function(t,e){if(!e)return t;for(var n=Object.keys(e),a=0;a<n.length;){var i=n[a],r=e[i];void 0!==r&&(/^on/.test(i)&&r?t.on(i.replace(/^on/,"").toLowerCase(),r):"text"===i?t.text(r):"html"===i?t.html(r):"append"===i?t.append(r):"className"===i?t.attr("class",r):t.attr(i,r),a+=1)}return t}(g()("<".concat(e,"></").concat(e,">")),n)}function u(t,e,n){if(n||e.empty(),h(t)){for(var a=[],i=0;i<t.length;i++){var r=l(t[i]);t[i].children&&(r=u(t[i].children,r,!0)),a.push(r)}e.append(a)}else p(t)&&(n=l(t),t.children&&(n=u(t.children,n,!0)),e.append(n));return e}var c,d=n(0),g=n.n(d),h=function(t){return Array.isArray(t)},f=function(t){return"number"==typeof t&&!isNaN(t)},p=function(t){return"object"==typeof t},m=function(t){return"function"==typeof t},_=function(t){return"string"==typeof t},b=function(t){if("[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t))return!0;if(_(t)){t=new Date(t);if(f(t.getDate()))return!0}return!1},v=function(t,n){return t.sort(function(t,e){return"asc"===n?parseInt(t,10)-parseInt(e,10):parseInt(e,10)-parseInt(t,10)})},y=function(t){return"keys"in Object?Object.keys(t):Object.getOwnPropertyNames(t)},P=function(t,e){if(C(h(t),"ForEach requires array input"),!t.length)return[];m(e)||(e=function(){});for(var n=0,a=t.length;n<a;)e.apply(null,[t[n],n]),n+=1;return t},k=function(t,e){if(C(h(t),"_filter requires array input"),!t.length)return[];if(!m(e))return t;for(var n=0,a=t.length,i=[];n<a;)e.apply(null,[t[n],n])&&i.push(t[n]),n+=1;return i},C=function(t,e){if(!t){for(var n=arguments.length,a=new Array(2<n?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var r=[].concat(a),o=0;throw(e=new Error(e.replace(/%s/g,function(){return r[o++]}))).name="TableSortable Violation",e.framesToPop=1,e}},w=function(t,e){if(t===e)return 0;if(f(t))return parseFloat(t)>parseFloat(e)?1:-1;if(b(t)){var n=new Date(t),a=new Date(e);return n.getTime()>a.getTime()?1:-1}return!_(t)||e<t?1:-1},E=function(n,a){var i;return function(){var t=this,e=arguments;clearTimeout(i),i=window.setTimeout(function(){return n.apply(t,e)},a)}},D=function(t){return _(t)?t.toLowerCase():String(t)},x=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(!e&&!f(e))return!1;var a=y(t);h(n)||(n=a);for(var i=0,r=a.length,o=!1,s=D(e);i<r;){var l=a[i],u=D(t[l]);if(n.length&&-1<n.indexOf(l)&&-1<u.indexOf(s)){o=!0;break}if(!n.length&&-1<u.indexOf(s)){o=!0;break}i+=1}return o},S=function(t,e){return h(e)&&e[0]<=t&&e[1]>t},O=(r(j,[{key:"_formatError",value:function(t,e,n){for(var a=arguments.length,i=new Array(3<a?a-3:0),r=3;r<a;r++)i[r-3]=arguments[r];C.apply(o,[t,"".concat(this._name,".").concat(e," ").concat(n)].concat(i))}},{key:"_hasDataset",value:function(){this._formatError(null!==this.dataset,"data",'No source collection is provided. Add your collection to dataset with "dataset.fromCollection([{}])" method.')}},{key:"fromCollection",value:function(t){this._formatError(h(t),"fromCollection","Requires dataset to be a collection, like [{ }]"),this.dataset=t,this._cachedData=JSON.stringify(t),this._datasetLen=t.length}},{key:"top",value:function(t){return this._hasDataset(),t?(this._formatError(f(t),"top","Requires length to be a number"),this.dataset.slice(0,t)):this.dataset.slice(0,this._outLen)}},{key:"bottom",value:function(t){return this._hasDataset(),t=t?(this._formatError(f(t),"bottom","Requires length to be a number"),Math.max(this._datasetLen-t,0)):Math.max(this._datasetLen-this._outLen,0),this.dataset.slice(t,this._datasetLen)}},{key:"get",value:function(t,e){return this._hasDataset(),this._formatError(f(t),"get",'Requires "from" to be a number'),this._formatError(f(e),"get",'Requires "to" to be a number'),this._formatError(!(e<t),"get",'"from" cannot be greater than "to"'),t=Math.max(t,0),e=Math.min(e,this._datasetLen),this.dataset.slice(t,e)}},{key:"sort",value:function(n,t){this._hasDataset(),this._formatError(_(n),"sort",'Requires "column" type of string'),this._formatError(_(t),"sort",'Requires "direction" type of string'),this._formatError("asc"===t||"desc"===t,"sort",'"%s" is invalid sort direction. Use "dataset.sortDirection.ASC" or "dataset.sortDirection.DESC".',t);var e=this.top(1)[0];return this._formatError(e[n],"sort",'Column name "%s" does not exist in collection',n),this.sortDirection.ASC===t?this.dataset.sort(function(t,e){return w(t[n],e[n])}):this.dataset.sort(function(t,e){return w(e[n],t[n])}),this.top(this._datasetLen)}},{key:"pushData",value:function(t){h(t)&&Array.prototype.push.apply(this.dataset,t)}},{key:"lookUp",value:function(e,n){var t;(_(e)||f(e))&&(t=JSON.parse(this._cachedData),this.dataset=""===e?t:k(t,function(t){return x(t,e,n)}),this._datasetLen=this.dataset.length)}}]),j),T=function(){return{createElement:s,render:u}},n=(n(2),r(U,[{key:"optionDepreciation",value:function(){var t=this.options;this.logWarn(t.columnsHtml,"columnsHtml","has been deprecated. Use formatHeader()"),this.logWarn(t.processHtml,"processHtml","has been deprecated. Use formatCell()"),this.logWarn(t.dateParsing,"dateParsing","has been deprecated. It is true by default."),this.logWarn(t.generateUniqueIds,"generateUniqueIds","has been deprecated. It is true by default."),this.logWarn(t.showPaginationLabel,"showPaginationLabel","has been deprecated. It is true by default."),this.logWarn(t.paginationLength,"paginationLength","has been deprecated. Use rowsPerPage")}},{key:"logError",value:function(t,e,n){for(var a=arguments.length,i=new Array(3<a?a-3:0),r=3;r<a;r++)i[r-3]=arguments[r];C.apply(o,[t,"".concat(this._name,".").concat(e," ").concat(n)].concat(i))}},{key:"logWarn",value:function(t,e,n){t&&console.warn("".concat(this._name,".options.").concat(e," ").concat(n))}},{key:"emitLifeCycles",value:function(t){if(this.options){var e=this.options;if(m(e[t])){for(var n=arguments.length,a=new Array(1<n?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e[t].apply(this,a)}}}},{key:"setPage",value:function(t,e){this.logError(f(t),"setPage","expect argument as number");var n=this._pagination.totalPages;f(t)&&S(t,[0,n])&&(this._pagination.currentPage=t,e&&this._dataset.pushData(e),this.updateTable())}},{key:"updateRowsPerPage",value:function(t){this.logError(f(t),"updateRowsPerPage","expect argument as number"),t&&(this._pagination.currentPage=0,this.options.rowsPerPage=t,this.updateTable())}},{key:"lookUp",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=this.options.columns;this.logError(e&&h(e),"lookUp","second argument must be array of keys"),e.length||(e=n),this._pagination.currentPage=0,this._dataset.lookUp(t,y(e)),this.debounceUpdateTable()}},{key:"_bindSearchField",value:function(){var e=this,t=this.options.searchField;t&&(t=g()(t),this.logError(t.length,"searchField",'"%s" is not a valid DOM element or string',t),t.on("input",function(){var t=g()(this).val();e.lookUp(t)}),this.options.searchField=t)}},{key:"_validateRootElement",value:function(){this.logError(this._rootElement.length,"element",'"%s" is not a valid root element',this._rootElement)}},{key:"_createTable",value:function(){this._table=g()("<table></table>").addClass("table gs-table")}},{key:"_initDataset",value:function(){var t=this.options.data;this.logError(h(t),"data","table-sortable only supports collections. Like: [{ key: value }, { key: value }]");var e=new O;e.fromCollection(t),this._dataset=e}},{key:"_validateColumns",value:function(){var t=this.options.columns;this.logError(p(t),"columns","Invalid column type, see docs")}},{key:"sortData",value:function(t){var e=this._sorting,n=e.dir,e=e.currentCol;(n=t!==e?"":n)?n===this._dataset.sortDirection.ASC?n=this._dataset.sortDirection.DESC:n===this._dataset.sortDirection.DESC&&(n=this._dataset.sortDirection.ASC):n=this._dataset.sortDirection.ASC,e=t,this._sorting={dir:n,currentCol:e},this._dataset.sort(e,n),this.updateCellHeader()}},{key:"_addColSorting",value:function(e,n){var a=this,t=this.options.sorting,i=this;return t&&(t&&!h(t)&&((e=g()(e)).attr("role","button"),e.addClass("gs-button"),n===this._sorting.currentCol&&this._sorting.dir&&e.append(this.options.sortingIcons[this._sorting.dir]),e.click(function(t){i.sortData(n)})),h(t)&&P(t,function(t){n===t&&((e=g()(e)).attr("role","button"),e.addClass("gs-button"),n===a._sorting.currentCol&&a._sorting.dir&&e.append(a.options.sortingIcons[a._sorting.dir]),e.click(function(t){i.sortData(n)}))})),e}},{key:"getCurrentPageIndex",value:function(){var t=this._dataset._datasetLen,e=this.options,n=e.pagination,a=e.rowsPerPage,e=this._pagination.currentPage;if(!n)return{from:0};e*=a,t=Math.min(e+a,t);return{from:Math.min(e,t),to:t}}},{key:"_renderHeader",value:function(t){var n=this;t=t||g()('<thead class="gs-table-head"></thead>');var e=this.options,a=e.columns,i=e.formatHeader,r=[],e=y(a);P(e,function(t,e){e=m(i)?i(a[t],t,e):"<span>".concat(a[t],"</span>");e=n._addColSorting(e,t);e=n.engine.createElement("th",{html:e});r.push(e)});e=this.engine.createElement("tr",null,r);return this.engine.render(e,t)}},{key:"_renderBody",value:function(t){t=t||g()('<tbody class="gs-table-body"></tbody>');var a=this.engine,e=this.options,n=e.columns,i=e.formatCell,r=this.getCurrentPageIndex(),o=r.from,e=r.to,r=void 0===e?this._dataset.top():this._dataset.get(o,e),s=[],l=y(n);return P(r,function(e,t){var n=[];P(l,function(t){void 0!==e[t]&&(t=m(i)?a.createElement("td",{html:i(e,t)}):a.createElement("td",{html:e[t]}),n.push(t))}),s.push(a.createElement("tr",null,n))}),a.render(s,t)}},{key:"_createCells",value:function(){return{thead:this._renderHeader(),tbody:this._renderBody()}}},{key:"onPaginationBtnClick",value:function(t,e){var n=this,a=this._pagination,i=a.totalPages,r=a.currentPage,a=this.options.onPaginationChange;"up"===t?r<i-1&&(r+=1):"down"===t&&0<=r&&--r,m(a)?(t=isNaN(e)?r:e,a.apply(this,[t,function(t){return n.setPage(t)}])):(this._pagination.currentPage=void 0!==e?e:r,this.updateTable())}},{key:"renderPagination",value:function(t){var e=this,n=this.engine,a=this.options,i=a.pagination,r=a.paginationContainer,o=a.prevText,s=a.nextText,l=this._pagination,u=l.currentPage,c=l.totalPages,a=l.visiblePageNumbers,l=Math.min(c,a),a=0,d=Math.min(c,a+l);if(l/2<u&&u<c-l/2?(a=u-Math.floor(l/2),d=Math.min(c,a+l)):c-l/2<u&&(a=c-l,d=c),t||(t=g()('<div class="gs-pagination"></div>'),g()(r).length?g()(r).append(t):this._table.after(t)),!i)return t;var h=[],o=n.createElement("button",{className:"btn btn-default",html:o,disabled:0===u,onClick:function(){return e.onPaginationBtnClick("down")}});h.push(o);o=n.createElement("button",{className:"btn btn-default",disabled:!0,text:"..."});l/2<u&&h.push(o);for(var f=a;f<d;){var p=n.createElement("button",{className:u===f?"btn btn-primary active":"btn btn-default",onClick:function(){var t=parseInt(g()(this).attr("data-page"),10);Number.isNaN(t)&&(t=parseInt(g()(this).text()-1)),e.onPaginationBtnClick(null,t)},text:f+1,"data-page":f});h.push(p),f+=1}u<c-l/2&&h.push(o);s=n.createElement("button",{className:"btn btn-default",html:s,disabled:c-1<=u,onClick:function(){return e.onPaginationBtnClick("up")}});h.push(s),t.append(h);c=this.getCurrentPageIndex(),s=c.from,c=c.to,s=n.createElement("span",{text:"Showing ".concat(Math.min(c,s+1)," to ").concat(c," of ").concat(this._dataset._datasetLen," rows")}),c=n.createElement("div",{className:"col-md-6"},s),s=n.createElement("div",{className:"btn-group d-flex justify-content-end"},h),s=n.createElement("div",{className:"col-md-6"},s),s=n.createElement("div",{className:"row"},[c,s]);return n.render(s,t)}},{key:"createPagination",value:function(){var t=this.options,e=t.rowsPerPage,n=t.pagination,t=t.totalPages;if(!n)return!1;this.logError(e&&f(e),"rowsPerPage","should be a number greater than zero."),this.logError(f(t),"totalPages","should be a number greater than zero.");e=t||Math.ceil(this._dataset._datasetLen/e);e<=0&&(e=1),this._pagination.totalPages=e,this._pagination.elm?this.renderPagination(this._pagination.elm):this._pagination.elm=this.renderPagination()}},{key:"_generateTable",value:function(t,e){this._table.html(""),this._table.append(t),this._table.append(e),this._thead=t,this._tbody=e}},{key:"_renderTable",value:function(){var t;this._rootElement.is("table")?this._rootElement.html(this._table.html()):(t=this.engine.createElement("div",{className:"gs-table-container",append:this._table}),this._rootElement=this.engine.render(t,this._rootElement))}},{key:"_initStyles",value:function(){var t;this.options.responsive||((t=g()("<style></style>")).attr("id","gs-table"),t.html(".gs-table-container .table{table-layout:fixed}@media(max-width:767px){.gs-table-container{overflow:auto;max-width:100%}}"),g()("head").append(t),this._styles=t)}},{key:"init",value:function(){this.emitLifeCycles("tableWillMount"),this._validateRootElement(),this._initDataset(),this._createTable(),this._validateColumns();var t=this._createCells(),e=t.thead,t=t.tbody;this._generateTable(e,t),this._renderTable(),this.createPagination(),this._bindSearchField(),this._initStyles(),this._isMounted=!0,this.emitLifeCycles("tableDidMount"),-1===this._cachedViewPort&&this.resizeSideEffect()}},{key:"_debounceUpdateTable",value:function(){this.debounceUpdateTable=E(this.updateTable,400)}},{key:"updateTable",value:function(){this._isUpdating||(this.emitLifeCycles("tableWillUpdate"),this._isUpdating=!0,this._renderHeader(this._thead),this._renderBody(this._tbody),this.createPagination(),this._isUpdating=!1,this.emitLifeCycles("tableDidUpdate"))}},{key:"updateCellHeader",value:function(){this._isUpdating||(this._isUpdating=!0,this.emitLifeCycles("tableWillUpdate"),this._renderHeader(this._thead),this._renderBody(this._tbody),this._isUpdating=!1,this.emitLifeCycles("tableDidUpdate"))}},{key:"resizeSideEffect",value:function(){var t=E(this.makeResponsive,500);window.addEventListener("resize",t.bind(this)),this.makeResponsive()}},{key:"makeResponsive",value:function(){var e,t=this.options.responsive,n=window.innerWidth,a=v(y(t),"desc");this.logError(p(t),"responsive",'Invalid type of responsive option provided: "%s"',t),P(a,function(t){parseInt(t,10)>n&&(e=t)}),this._cachedViewPort!==e&&(t=t[this._cachedViewPort=e],p(t)?(this._cachedOption||(this._cachedOption=g.a.extend({},this.options)),this.options=g.a.extend(this.options,t),this.refresh()):this._cachedOption&&(this.options=g.a.extend({},this._cachedOption),this._cachedOption=null,this._cachedViewPort=-1,this.refresh()))}}]),U);function U(t){var a=this;i(this,U),this._name="tableSortable",this._defOptions={element:"",data:[],columns:{},sorting:!0,pagination:!0,paginationContainer:null,rowsPerPage:10,formatCell:null,formatHeader:null,searchField:null,responsive:{},totalPages:0,sortingIcons:{asc:"<span>&#9660;</span>",desc:"<span>&#9650;</span>"},nextText:"<span>Next</span>",prevText:"<span>Prev</span>",tableWillMount:function(){},tableDidMount:function(){},tableWillUpdate:function(){},tableDidUpdate:function(){},tableWillUnmount:function(){},tableDidUnmount:function(){},onPaginationChange:null},this._styles=null,this._dataset=null,this._table=null,this._thead=null,this._tbody=null,this._isMounted=!1,this._isUpdating=!1,this._sorting={currentCol:"",dir:""},this._pagination={elm:null,currentPage:0,totalPages:1,visiblePageNumbers:5},this._cachedOption=null,this._cachedViewPort=-1,this.setData=function(t,e,n){a.logError(h(t),"setData","expect first argument as array of objects"),a.logError(p(e),"setData","expect second argument as objects"),a._isMounted&&t&&(n?a._dataset.pushData(t):a._dataset.fromCollection(t),e&&(a.options.columns=e),a.refresh())},this.getData=function(){return a._isMounted?a._dataset.top():[]},this.getCurrentPageData=function(){if(a._isMounted){var t=a.options.rowsPerPage,e=a._pagination.currentPage*t,t=e+t;return a._dataset.get(e,t)}return[]},this.refresh=function(t){t?(a.distroy(),a.create()):a._isMounted&&a.updateTable()},this.distroy=function(){a._isMounted&&(a.emitLifeCycles("tableWillUnmount"),a._table.remove(),a._styles&&a._styles.length&&(a._styles.remove(),a._styles=null),a._dataset=null,a._table=null,a._thead=null,a._tbody=null,a._pagination.elm&&a._pagination.elm.remove(),a._pagination={elm:null,currentPage:0,totalPages:0,visiblePageNumbers:5},a._isMounted=!1,a._isUpdating=!1,a._sorting={currentCol:"",dir:""},a._cachedViewPort=-1,a._cachedOption=null,a.emitLifeCycles("tableDidUnmount"))},this.create=function(){a._isMounted||a.init()},this.options=g.a.extend(this._defOptions,t),delete this._defOptions,this._rootElement=g()(this.options.element),this.engine=T(),this.optionDepreciation(),this.init(),this._debounceUpdateTable()}function j(){i(this,j),this._name="dataset",this.dataset=null,this._cachedData=null,this._datasetLen=0,this._outLen=10,this.sortDirection={ASC:"asc",DESC:"desc"}}window.Pret=T(),window.TableSortable=n,window.DataSet=O,(c=jQuery).fn.tableSortable=function(t){return t.element=c(this),new window.TableSortable(t)},e.default=n}]),$(document).ready(function(){StaticInit()}),$(document).ready(function(){SmapDataTableInit()});