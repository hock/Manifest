{"version":3,"sources":["../../src/services/manifester.js"],"names":[],"mappings":"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","file":"manifester.js","sourcesContent":["const fetch = require(\"node-fetch\");\nconst express = require('express'); // Import the Express module\nconst app = express(); // Create an Express application\nconst url = require('url'); // Import the URL module\nconst request = require('request-promise'); // Import the request-promise module\nconst hostname = 'hockbook.local';\nconst port = 3000;\n\nfetch(\"http://hockbook.local/Manifest/dist/services/keys.json\").then(d => d.json()).then(k => Service(k));\n\t\nfunction Service(k) {\n\tconsole.log(\"Starting Service\");\n\n\tconst gsheetkey = k.gsheetkey; // Google Sheets API key\n\tconst aprsfikey = k.aprsfikey; // APRS.fi API key\n\n\tapp.listen(port, hostname, () => {\n\t\tconsole.log(`Server running at ${hostname}:${port}/`);\n\t});\n\n\tapp.get('/', (req, res) => {\n\t\tlet Manifester = {\n\t\t\tg: null,\n\t\t\tr: null,\n\t\t\tgetSmapGeo: function (id) {\n\t\t\t\treturn request({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turi: 'https://raw.githubusercontent.com/hock/smapdata/master/data/' + id + '.geojson',\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetSmapGraph: function (id) {\n\t\t\t\treturn request({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turi: 'https://raw.githubusercontent.com/hock/smapdata/master/data/' + id + '.json',\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetGoogleOverview: function (id) {\n\t\t\t\treturn request({\n\t\t\t\t\turi: 'https://sheets.googleapis.com/v4/spreadsheets/' + id + '/values/Overview?key=' + gsheetkey,\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetGoogleList: function (id) {\n\t\t\t\treturn request({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turi: 'https://sheets.googleapis.com/v4/spreadsheets/' + id + '/values/List?key=' + gsheetkey,\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetMarineTrafficOverview: function () {\n\t\t\t\treturn request({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turi: 'http://services.marinetraffic.com/api/exportvessels/cc503f48eb2c8e49549cc56de3c7059c4b042931/timespan:4/protocol:json',\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetAprsFi: function (vid) {\n\t\t\t\treturn request({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turi: 'https://api.aprs.fi/api/get?name=' + vid + '&what=loc&apikey=' + aprsfikey + '&format=json',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'User-Agent': 'manifest/0.2 (+https://manifest.supplystudies.com/)',\n\t\t\t\t\t},\n\t\t\t\t\tjson: true,\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\n\t\tlet url_parts = url.parse(req.url, true);\n\t\tlet query = url_parts.query;\n\n\t\tif (query.type == 'smap' || query.type == 'gsheet') {\n\t\t\tlet gprocessor = null;\n\t\t\tlet rprocessor = null;\n\n\t\t\tif (query.type == 'smap') {\n\t\t\t\tgprocessor = Manifester.getSmapGeo;\n\t\t\t\trprocessor = Manifester.getSmapGraph;\n\t\t\t}\n\t\t\tif (query.type == 'gsheet') {\n\t\t\t\tgprocessor = Manifester.getGoogleOverview;\n\t\t\t\trprocessor = Manifester.getGoogleList;\n\t\t\t}\n\n\t\t\tgprocessor(query.id)\n\t\t\t\t.then(function (result) {\n\t\t\t\t\tManifester.g = result;\n\t\t\t\t\trprocessor(query.id)\n\t\t\t\t\t\t.then(function (result) {\n\t\t\t\t\t\t\tManifester.r = result;\n\t\t\t\t\t\t\tres.statusCode = 200;\n\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\t\t\t\tconsole.log('gprocessor done');\n\t\t\t\t\t\t\tres.end('{\"g\": ' + JSON.stringify(Manifester.g) + ', \"r\": ' + JSON.stringify(Manifester.r) + '}');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\tconsole.log('gprocessor failed');\n\n\t\t\t\t\t\t\tres.statusCode = 404;\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\t\t\t\tres.end('{\"not found\"}');\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tconsole.log('gprocessor failed');\n\n\t\t\t\t\tres.statusCode = 404;\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\t\tres.end('{\"not found\"}');\n\t\t\t\t});\n\t\t}\n\t\tif (query.type == 'proxy-marine') {\n\t\t\tManifester.getMarineTrafficOverview()\n\t\t\t\t.then(function (result) {\n\t\t\t\t\tres.statusCode = 200;\n\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\t\tconsole.log('proxy-marine success');\n\t\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tconsole.log('proxy-marine failed');\n\n\t\t\t\t\tres.statusCode = 404;\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\t\tres.end('{\"not found\"}');\n\t\t\t\t});\n\t\t}\n\t\tif (query.type == 'aprsfi') {\n\t\t\tManifester.getAprsFi(query.id)\n\t\t\t\t.then(function (result) {\n\t\t\t\t\tres.statusCode = 200;\n\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\t\tconsole.log('aprsfi success');\n\t\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tconsole.log('aprsfi failed');\n\n\t\t\t\t\tres.statusCode = 404;\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\t\tres.end('{\"error: \"RESOURCE NOT FOUND\"}');\n\t\t\t\t});\n\t\t}\n\t});\n}"]}