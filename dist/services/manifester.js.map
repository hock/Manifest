{"version":3,"sources":["../../src/services/manifester.js"],"names":[],"mappings":"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","file":"manifester.js","sourcesContent":["const http = require('http');\nconst hostname = 'localhost';\nconst port = 3000;\nconst url = require('url');\nconst gsheetkey = 'AIzaSyDbKq9njfiQa3UDGzRaaG0YaQOT0kYNoFQ';\nconst aprsfikey = '161937.xJdpU4VkxgfJ2EA';\n\nconst server = http.createServer((req, res) => {\n\tvar request = require('request-promise');\n\n\tvar Manifester = {\n\t\tg: null,\n\t\tr: null,\n\t\tgetSmapGeo: function(id) {\n\t\t\treturn request({\n\t\t\t\t\"method\":\"GET\", \n\t\t\t\t\"uri\": \"https://raw.githubusercontent.com/hock/smapdata/master/data/\"+id+\".geojson\",\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t},\n\t\tgetSmapGraph: function(id) {\n\t\t\treturn request({\n\t\t\t\t\"method\":\"GET\", \n\t\t\t\t\"uri\": \"https://raw.githubusercontent.com/hock/smapdata/master/data/\"+id+\".json\",\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t},\n\t\tgetGoogleOverview: function(id) {\n\t\t\treturn request({\n\t\t\t\t\"uri\": \"https://sheets.googleapis.com/v4/spreadsheets/\" + id + \"/values/Overview?key=\" + gsheetkey,\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t},\n\t\tgetGoogleList: function(id) {\n\t\t\treturn request({\n\t\t\t\t\"method\":\"GET\", \n\t\t\t\t\"uri\": \"https://sheets.googleapis.com/v4/spreadsheets/\" + id + \"/values/List?key=\" + gsheetkey,\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t},\n\t\t\n\t\tgetMarineTrafficOverview: function() {\n\t\t\treturn request({\n\t\t\t\t\"method\":\"GET\", \n\t\t\t\t\"uri\": \"http://services.marinetraffic.com/api/exportvessels/cc503f48eb2c8e49549cc56de3c7059c4b042931/timespan:4/protocol:json\",\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t},\n\t\t\n\t\tgetAprsFi: function(vid) {\n\t\t\treturn request({\n\t\t\t\t\"method\":\"GET\", \n\t\t\t\t\"uri\": \"https://api.aprs.fi/api/get?name=\"+vid+\"&what=loc&apikey=\"+aprsfikey+\"&format=json\",\n\t\t\t    \"headers\": {\n\t\t\t           'User-Agent': 'manifest/0.2 (+https://manifest.supplystudies.com/)'\n\t\t\t    },\n\t\t\t\t\"json\": true\n\t\t\t});\n\t\t}\n\t\t\n\t};\n\t\n\tvar url_parts = url.parse(req.url, true);\n\tvar query = url_parts.query;\n\t\n\tif (query.type == \"smap\" || query.type == \"gsheet\") {\n\t\tvar gprocessor = null;\n\t\tvar rprocessor = null;\n\t\n\t\tif(query.type == \"smap\") { gprocessor = Manifester.getSmapGeo; rprocessor = Manifester.getSmapGraph; }\t\n\t\tif(query.type == \"gsheet\") { gprocessor = Manifester.getGoogleOverview; rprocessor = Manifester.getGoogleList; }\n\n\t\tgprocessor(query.id).then(function(result) {\n\t\t  \tManifester.g = result; \n\t\t\trprocessor(query.id).then(function(result) {\n\t\t\t\tManifester.r = result;\n\t\t\t\tres.statusCode = 200;\n\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader( \"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\" );\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\n\t\t\t\tconsole.log(\"process success!\");\n\t\t\t\tres.end('{\"g\": '+JSON.stringify(Manifester.g)+', \"r\": '+JSON.stringify(Manifester.r)+'}');\n\t\t\t});\n\t\t}).catch(function(err) {\n\t\t\tconsole.log(\"failure!\");\n\t\t\n\t\t\tres.statusCode = 404;\n\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\tres.setHeader( \"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\" );\n\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\tres.end('{\"error: \"RESOURCE NOT FOUND\"}');\n\t\t});\n\t}\n\tif (query.type == \"proxy-marine\") {\n\t\t\tManifester.getMarineTrafficOverview().then(function(result) {\n\t\t\t\tres.statusCode = 200;\n\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\n\t\t\t\tconsole.log(\"proxy success!\");\n\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t}).catch(function(err) {\n\t\t\t\tconsole.log(\"failure!\");\n\t\t\n\t\t\t\tres.statusCode = 404;\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader( \"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\" );\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\tres.end('{\"error: \"RESOURCE NOT FOUND\"}');\n\t\t\t});\n\t}\n\tif (query.type == \"aprsfi\") {\n\t\t\tManifester.getAprsFi(query.id).then(function(result) {\n\t\t\t\tres.statusCode = 200;\n\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\n\t\t\t\tconsole.log(\"proxy success!\");\n\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t}).catch(function(err) {\n\t\t\t\tconsole.log(\"failure!\");\n\t\t\n\t\t\t\tres.statusCode = 404;\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader( \"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\" );\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\tres.end('{\"error: \"RESOURCE NOT FOUND\"}');\n\t\t\t});\n\t}\n});\nserver.listen(port, hostname, () => {\n\tconsole.log(`Server running at http://${hostname}:${port}/`);\n});\n"]}